### Lab 6: Dashboard en React para el Blog

**Objetivo:** Crear una SPA en React que consuma el API del blog para gestionar Categorías y Posts (CRUD completo), además de autenticación de usuarios.

1. **Inicializar proyecto**

   * Usar Create React App o Vite:

     ```bash
     npx create-react-app blog-dashboard
     # o con Vite:
     npm init vite@latest blog-dashboard --template react
     ```
   * Entrar en la carpeta e instalar dependencias:

     ```bash
     cd blog-dashboard
     npm install react-router-dom axios jwt-decode
     ```

2. **Estructura de carpetas**

```bash

src/
├── api/                  # Clientes Axios para auth, categorías y posts
│   ├── auth.js
│   ├── categorias.js
│   └── posts.js
├── components/           # Componentes reutilizables (Form, List, ProtectedRoute)
├── contexts/             # Contexto de Auth (AuthContext)
├── pages/                # Páginas de la app (Login, Register, Dashboard, etc.)
│   ├── Login.jsx
│   ├── Register.jsx
│   ├── CategoriaList.jsx
│   ├── CategoriaForm.jsx
│   ├── CategoriaDetail.jsx
│   ├── PostList.jsx
│   ├── PostForm.jsx
│   └── PostDetail.jsx
├── App.jsx
└── index.jsx

```

3. **Configuración de rutas**  

   - En `App.jsx`, usar `BrowserRouter`, definir rutas públicas (`/login`, `/register`) y protegidas (`/categorias`, `/posts`).  
   - Crear un componente `ProtectedRoute` que revise `AuthContext` para redirigir si no hay token.

4. **Contexto de autenticación**  

   - En `contexts/AuthContext.jsx`, usar `createContext` para compartir `user`, `accessToken`, funciones `login`, `logout`, `refreshToken`.  
   - Almacenar `accessToken` y `refreshToken` en `localStorage` y renovar el token antes de que caduque.

5. **Cliente Axios**  

   - En `api/auth.js`, funciones `register`, `login`, `refreshToken`, `logout`.  
   - En `api/categorias.js` y `api/posts.js`, instanciar `axios.create({ baseURL: process.env.REACT_APP_API_URL })`, e interceptores para añadir `Authorization: Bearer <token>` y para manejar refresh automático al recibir 401.

6. **Componentes CRUD**  

   - **Listar**: En `CategoriaList.jsx` y `PostList.jsx`, llamar a `api.list()` y mostrar en tabla o cards. Incluir botones `Editar`, `Eliminar`, `Ver`.  
   - **Detalle / Editar**: En `CategoriaDetail.jsx` y `PostDetail.jsx`, obtener por ID (`api.getById(id)`), mostrar campos y un botón para editar.  
   - **Form**: En `CategoriaForm.jsx` y `PostForm.jsx`, usar formularios controlados para crear o actualizar. Llamar a `api.create(data)` o `api.update(id, data)`.  
   - **Eliminar**: Botón en listas y detalle que llame a `api.delete(id)` y refresque la lista.

7. **Autenticación UI** 

   - `Login.jsx`: formulario de email/password, al enviar llama a `auth.login()`, guarda token y redirige al dashboard.  
   - `Register.jsx`: formulario de registro, tras registro automático puede redirigir a login.

8. **Estilos y UX**  

   - Opcional: usar Tailwind o tu librería CSS preferida.  
   - Añadir barra de navegación con enlaces a Categorías, Posts y Logout.
   - Mostrar mensajes de éxito/error con toasts o alertas.

9. **Pruebas básicas** 

   - Verificar que sin token no se puede acceder a rutas protegidas.  
   - Probar CRUD completo: crear, listar, editar, eliminar tanto Categorías como Posts.

*Entrega:* Repositorio React completo, desplegable estáticamente (Netlify, Vercel) o sirviendo estáticos desde Express.
